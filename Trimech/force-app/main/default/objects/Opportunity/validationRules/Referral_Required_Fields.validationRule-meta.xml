<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Referral_Required_Fields</fullName>
    <active>true</active>
    <description>When Referral = Yes, the following fields must be populated: Business Unit Referred From, Business Unit Referred To, Rep Referred From.</description>
    <errorConditionFormula>AND(
    $UserRole.Name &lt;&gt; &apos;System Administrator&apos;,
    ISPICKVAL(Referral__c, &apos;Yes&apos;),
    OR (
        ISBLANK( Business_Unit_Referred_From__c ),
        ISBLANK( Business_Unit_Referred_To__c ),
        ISBLANK( Rep_Referred_From__c )
    ),
    OR (ISNEW(), ISCHANGED(Referral__c), ISCHANGED(Business_Unit_Referred_From__c), ISCHANGED(Business_Unit_Referred_To__c), ISCHANGED( Rep_Referred_From__c ))
)</errorConditionFormula>
    <errorMessage>When Cross-Sell Referral = Yes, the following fields must be populated: Business Unit Referred From, Business Unit Referred To, Rep Referred From.</errorMessage>
</ValidationRule>
